---
description: 从目标域内低权限的机器，逐步移动到域内高权限的机器上
---

# ✔️ 横向移动 - Lateral Movement

## 先决条件

* 已经在目标域内建立了立足点，并拥有对一个或多个账户的访问权限，包括本地用户账户、域用户账户或服务账户
* 已经定位到了目标域内对整个活动目录有完全控制权的高权限目标账户（如域控制器、关键服务器、重要用户账户（如域管理员））
* 已收集到了密码散列，恢复了现有的票据（包括用户名和密码、NTLM哈希、Kerberos票据等）
* 已经了解了目标域的凭证存储的位置和机制，如LSASS进程、注册表、文件系统等，以便后续进行凭证提取
* 已经了解了目标域的资源的ACL配置，以便后续识别可以滥用的权限，如写权限、执行权限等

## 目的

* 从目标域内低权限的机器，逐步移动到域内高权限的机器上，最终获取对整个目标域的完全控制权。

## Tips

* 常规的下一步：破解已经获得的任何密码散列，并对具有明文密码的机器进行身份验证，以获得未经授权的访问（破解密码需要时间，且有可能破解不出来）
* Kerberos和NTLM不直接使用明文密码，微软的本地工具也不支持使用密码散列进行身份验证。所以利用横向移动技术，可以对目标系统进行仅使用用户的散列或Kerberos票据进行身份验证并获得到代码执行。

## 常用工具

* [x] Mimikatz
* [x] Impacket
* [x] PowerView
* [x] Crackapexec
